<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>QCX v3 – Universal Encrypted Archive</title>
  <!-- Library kompresi (zlib/DEFLATE) -->
  <script src="https://cdn.jsdelivr.net/npm/fflate@0.8.2/umd/index.min.js"></script>
  <style>
    :root {
      --bg: #050509;
      --panel: #0b0b15;
      --panel-soft: #10101a;
      --border: #1f2937;
      --accent: #2563eb;
      --accent-soft: #1d4ed8;
      --accent-warn: #f97316;
      --text-main: #f9fafb;
      --text-dim: #9ca3af;
      --btn-sec: #4b5563;
      --btn-sec-hover: #6b7280;
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 24px 12px 40px;
      background: radial-gradient(circle at top, #111827 0, #010108 45%, #000 100%);
      color: var(--text-main);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .app {
      max-width: 1120px;
      margin: 0 auto;
    }

    h1 {
      margin: 0 0 4px;
      font-size: clamp(1.8rem, 3vw, 2.4rem);
    }

    .subtitle {
      margin: 0 0 20px;
      color: var(--text-dim);
      font-size: 0.95rem;
    }

    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }

    .panel {
      flex: 1 1 320px;
      min-width: 0;
      background: linear-gradient(135deg, #0b0b15, #050510);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 16px 18px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.5);
    }

    .panel h2 {
      margin: 0 0 4px;
      font-size: 1.1rem;
    }

    .panel small {
      color: var(--text-dim);
      font-size: 0.8rem;
    }

    .field-label {
      display: block;
      margin-top: 12px;
      font-size: 0.85rem;
      color: var(--text-dim);
    }

    input[type="file"] {
      margin-top: 8px;
      font-size: 0.85rem;
      color: var(--text-main);
    }

    input[type="password"] {
      width: 100%;
      margin-top: 4px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--panel-soft);
      color: var(--text-main);
      font-size: 0.9rem;
      outline: none;
    }

    input[type="password"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37,99,235,0.35);
    }

    .btn-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    button {
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.12s ease, transform 0.08s ease, box-shadow 0.12s ease;
      white-space: nowrap;
    }

    .btn-main {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 6px 16px rgba(37,99,235,0.45);
    }
    .btn-main:hover {
      background: var(--accent-soft);
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(37,99,235,0.6);
    }

    .btn-sec {
      background: var(--btn-sec);
      color: var(--text-main);
    }
    .btn-sec:hover {
      background: var(--btn-sec-hover);
      transform: translateY(-1px);
    }

    .btn-warn {
      background: var(--accent-warn);
      color: #111827;
    }
    .btn-warn:hover {
      background: #fb923c;
      transform: translateY(-1px);
    }

    #log, #logMulti {
      margin-top: 10px;
      padding: 10px;
      background: var(--panel-soft);
      border-radius: 10px;
      min-height: 64px;
      font-size: 0.78rem;
      white-space: pre-line;
      color: var(--text-dim);
    }

    .table-wrap {
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
      max-height: 320px;
      overflow-y: auto;
      overflow-x: hidden;
      display: none;
      background: #020617;
    }

    .table-wrap::-webkit-scrollbar {
      width: 8px;
    }
    .table-wrap::-webkit-scrollbar-thumb {
      background: #374151;
      border-radius: 4px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.78rem;
    }
    th, td {
      padding: 6px 8px;
      border-bottom: 1px solid #111827;
      text-align: left;
    }
    th {
      background: #0f172a;
      position: sticky;
      top: 0;
      z-index: 1;
    }
    .cell-path {
      max-width: 240px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    @media (max-width: 768px) {
      body {
        padding: 18px 10px 32px;
      }
      .panel {
        padding: 13px 13px 15px;
      }
      .cell-path {
        max-width: 160px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>QCX v3 – Universal Encrypted Archive</h1>
    <p class="subtitle">
      Format arsip generasi baru: single file atau banyak file & folder → satu <code>.qcx</code> terenkripsi,
      terkompres, dan bisa dipakai di browser (desktop & HP).
    </p>

    <div class="grid">
      <!-- PANEL KIRI: SINGLE FILE -->
      <div class="panel">
        <h2>Mode Single File</h2>
        <small>
          Kompres satu file apa pun (DOCX, PDF, ZIP, video, dll) menjadi satu QCX terenkripsi,
          atau ekstrak kembali file dari QCX.
        </small>

        <label class="field-label">Pilih file (file biasa untuk kompres, atau .qcx untuk ekstrak):</label>
        <input type="file" id="singleInput">

        <label class="field-label">Password arsip (minimal 6 karakter):</label>
        <input type="password" id="singlePassword" placeholder="Password untuk QCX">

        <div class="btn-row">
          <button class="btn-main" id="btnSingleCompress">Kompres → .qcx</button>
          <button class="btn-sec" id="btnSingleDecompress">Ekstrak dari .qcx</button>
        </div>

        <div id="log">Log single akan muncul di sini…</div>
      </div>

      <!-- PANEL KANAN: MULTI FILE / FOLDER -->
      <div class="panel">
        <h2>Mode Multi File / Folder</h2>
        <small>
          Kompres banyak file / seluruh folder menjadi satu QCX (dedup & kompres global),
          bisa dilihat isinya dan diekstrak per-file atau semua sekaligus.
        </small>

        <label class="field-label">Pilih banyak file / folder:</label>
        <input type="file" id="multiInput" multiple webkitdirectory>

        <label class="field-label">Password untuk QCX baru:</label>
        <input type="password" id="multiPassword" placeholder="Minimal 6 karakter">

        <div class="btn-row">
          <button class="btn-main" id="btnCreateMulti">Buat QCX Multi</button>
        </div>

        <hr style="border:none;border-top:1px solid var(--border);margin:14px 0;">

        <label class="field-label">Buka QCX yang sudah ada:</label>
        <input type="file" id="qcxOpenInput" accept=".qcx">

        <label class="field-label">Password QCX yang akan dibuka:</label>
        <input type="password" id="openPassword" placeholder="Password arsip">

        <div class="btn-row">
          <button class="btn-sec" id="btnOpenQcx">Buka & Lihat Isi</button>
          <button class="btn-warn" id="btnExtractAll">Ekstrak Semua → Download</button>
        </div>

        <div id="logMulti">Log multi akan muncul di sini…</div>

        <div class="table-wrap" id="tableWrap">
          <table>
            <thead>
              <tr>
                <th>Path</th>
                <th>Ukuran</th>
                <th>CRC32</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Core logic QCX (crypto, kompres, format) -->
  <script src="qcx-core.js"></script>
  <!-- UI handler (DOM & event) -->
  <script src="qcx-ui.js"></script>
</body>
  </html>
